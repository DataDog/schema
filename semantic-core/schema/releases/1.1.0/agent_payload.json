{
  "$defs": {
    "LanguageName": {
      "enum": [
        "go",
        "python",
        "php",
        "ruby",
        "jvm",
        "dotnet",
        "js"
      ],
      "title": "LanguageName",
      "type": "string"
    },
    "Span": {
      "properties": {
        "service": {
          "description": "The name of the service with which this span is associated",
          "title": "Service",
          "type": "string"
        },
        "name": {
          "description": "The operation name of this span",
          "title": "Name",
          "type": "string"
        },
        "resource": {
          "description": "The resource name of this span, also sometimes called the endpoint (for web spans)",
          "title": "Resource",
          "type": "string"
        },
        "traceID": {
          "description": "The ID of the trace to which this span belongs",
          "title": "Trace ID",
          "type": "string"
        },
        "spanID": {
          "default": null,
          "description": "\n        Span identifier, generated by the tracer library. The value of this field is a 64-bit integer, and uniquely identifies the span within the trace.",
          "examples": [
            0,
            12345,
            543210,
            9999999
          ],
          "is_sensitive": false,
          "title": "Span ID",
          "type": "integer"
        },
        "parentID": {
          "default": null,
          "description": "The ID of this span's parent, or zero if this span has no parent",
          "examples": [
            0,
            12345,
            543210,
            9999999
          ],
          "is_sensitive": false,
          "title": "Parent ID",
          "type": "integer"
        },
        "start": {
          "description": "The number of nanoseconds between the Unix epoch and the beginning of this span",
          "title": "Start",
          "type": "integer"
        },
        "duration": {
          "description": "The time length of this span in nanoseconds",
          "title": "Duration",
          "type": "integer"
        },
        "error": {
          "default": null,
          "description": "Error is 1 if there is an error associated with this span, or 0 if there is not",
          "title": "Error",
          "type": "integer"
        },
        "meta": {
          "additionalProperties": {
            "type": "string"
          },
          "default": null,
          "description": "Meta is a mapping from tag name to tag value for string-valued tags",
          "title": "Meta",
          "type": "object"
        },
        "metrics": {
          "additionalProperties": {
            "type": "number"
          },
          "default": null,
          "description": "Metrics is a mapping from tag name to tag value for numeric-valued tags",
          "title": "Metrics",
          "type": "object"
        },
        "type": {
          "allOf": [
            {
              "$ref": "#/$defs/SpanType"
            }
          ],
          "default": null,
          "description": "Represents the type of the service with which this span is associated. Example values: `web`, `db`, `lambda`",
          "title": "Type"
        },
        "meta_struct": {
          "additionalProperties": {
            "type": "integer"
          },
          "default": null,
          "description": "Represents a registry of structured \"other\" data used by, e.g., AppSec",
          "title": "Meta Struct",
          "type": "object"
        }
      },
      "required": [
        "service",
        "name",
        "resource",
        "traceID",
        "start",
        "duration"
      ],
      "title": "Span",
      "type": "object",
      "allOf": [
        {
          "if": {
            "not": {
              "properties": {
                "type": {
                  "enum": [
                    "web",
                    "http",
                    "sql"
                  ]
                }
              }
            }
          },
          "then": {
            "properties": {
              "meta": {
                "$ref": "#/$defs/TagsBase"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "type": {
                "enum": [
                  "web",
                  "http"
                ]
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "properties": {
              "meta": {
                "$ref": "#/$defs/TagsHTTP"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "type": {
                "const": "sql"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "properties": {
              "meta": {
                "$ref": "#/$defs/TagsSQL"
              }
            }
          }
        }
      ]
    },
    "SpanType": {
      "description": "Span types have similar behaviour to \"app types\" and help categorize\ntraces in the Datadog application. They can also help fine grain agent\nlevel behaviours such as obfuscation and quantization, when these are\nenabled in the agent's configuration.",
      "enum": [
        "web",
        "http",
        "sql",
        "cassandra",
        "redis",
        "memcached",
        "mongodb",
        "elasticsearch",
        "leveldb",
        "dns",
        "queue",
        "consul",
        "graphql"
      ],
      "title": "SpanType",
      "type": "string"
    },
    "TraceChunk": {
      "properties": {
        "priority": {
          "description": "Specifies the sampling priority of the trace",
          "title": "Priority",
          "type": "integer"
        },
        "origin": {
          "default": null,
          "description": "Specifies the origin product (`lambda`, `rum`, etc.) of the trace",
          "title": "Origin",
          "type": "string"
        },
        "spans": {
          "description": "Specifies the list of containing spans",
          "items": {
            "$ref": "#/$defs/Span"
          },
          "title": "Spans",
          "type": "array"
        },
        "tags": {
          "additionalProperties": {
            "type": "string"
          },
          "default": null,
          "description": "Specifies the list of tags common in all Spans",
          "title": "Tags",
          "type": "object"
        },
        "droppedTrace": {
          "default": null,
          "description": "Specifies whether the trace was dropped by samplers or not",
          "title": "Dropped Trace",
          "type": "boolean"
        }
      },
      "required": [
        "priority",
        "spans"
      ],
      "title": "TraceChunk",
      "type": "object"
    },
    "TracerPayload": {
      "properties": {
        "containerID": {
          "default": null,
          "description": "Specifies the ID of the container where the tracer is running on",
          "title": "Container ID",
          "type": "string"
        },
        "languageName": {
          "allOf": [
            {
              "$ref": "#/$defs/LanguageName"
            }
          ],
          "description": "Specifies the language of the tracer",
          "title": "Language Name"
        },
        "languageVersion": {
          "description": "Specifies the language version of the tracer",
          "title": "Language Version",
          "type": "string"
        },
        "tracerVersion": {
          "description": "Specifies the version of the tracer",
          "title": "Tracer Version",
          "type": "string"
        },
        "runtimeID": {
          "default": null,
          "description": "Specifies V4 UUID representation of a tracer session",
          "title": "Runtime ID",
          "type": "string"
        },
        "chunks": {
          "description": "Specifies the list of containing trace chunks",
          "items": {
            "$ref": "#/$defs/TraceChunk"
          },
          "title": "Trace Chunks",
          "type": "array"
        },
        "tags": {
          "additionalProperties": {
            "type": "string"
          },
          "default": null,
          "description": "Specifies the list of tags common in all Trace Chunks",
          "title": "Trace Tags",
          "type": "object"
        },
        "env": {
          "description": "Specifies the `env` tag that is set in the tracer configuration",
          "title": "Env",
          "type": "string"
        },
        "hostname": {
          "default": null,
          "description": "Specifies the hostname where the tracer is running",
          "title": "Hostname",
          "type": "string"
        },
        "appVersion": {
          "description": "Specifies the `version` tag that set in the tracer configuration",
          "title": "App Version",
          "type": "string"
        }
      },
      "required": [
        "languageName",
        "languageVersion",
        "tracerVersion",
        "chunks",
        "env",
        "appVersion"
      ],
      "title": "TracerPayload",
      "type": "object"
    },
    "TagsBase": {
      "properties": {
        "span.kind": {
          "allOf": [
            {
              "$ref": "#/$defs/SpanKind"
            }
          ],
          "description": "",
          "title": "span.kind"
        }
      },
      "required": [
        "span.kind"
      ],
      "title": "TagsBase",
      "type": "object"
    },
    "TagsHTTP": {
      "properties": {
        "span.kind": {
          "allOf": [
            {
              "$ref": "#/$defs/SpanKind"
            }
          ],
          "description": "",
          "title": "span.kind"
        },
        "http.status_code": {
          "description": "\nThe HTTP response status code.\nWhen span.kind: client the response status code received.\nWhen span.kind: server the response status code sent.\nNote: Although this is an integer, it must be sent as a string.",
          "examples": [
            "200",
            "404",
            "500"
          ],
          "is_sensitive": false,
          "pattern": "^[12345]\\d\\d$",
          "title": "HTTP Status Code",
          "type": "string"
        },
        "http.url": {
          "description": "\nThe URL of the HTTP request, including the obfuscated query string.",
          "examples": [
            "https://example.com:443/search?q=datadog"
          ],
          "is_sensitive": true,
          "minLength": 1,
          "title": "HTTP URL",
          "type": "string"
        },
        "http.method": {
          "description": "\nThe HTTP method used for the connection. Required for both client and server spans.",
          "examples": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "PATCH"
          ],
          "is_sensitive": false,
          "pattern": "^(GET|HEAD|POST|PUT|DELETE|CONNECT|OPTIONS|TRACE|PATCH)$",
          "title": "HTTP Method",
          "type": "string"
        },
        "http.version": {
          "default": null,
          "description": "\nThe version of HTTP used for the request.",
          "examples": [
            "1.0",
            "1.1",
            "2.0"
          ],
          "is_sensitive": false,
          "pattern": "^1\\.[01]$|^2\\.0$",
          "title": "HTTP Version",
          "type": "string"
        },
        "http.route": {
          "default": null,
          "description": "\nThe matched route (path template).\nOnly when span.kind: server.",
          "examples": [
            "/users/:userID"
          ],
          "is_sensitive": false,
          "minLength": 1,
          "title": "HTTP Route",
          "type": "string"
        },
        "http.client_ip": {
          "default": null,
          "description": "\nThe IP address of the original client behind all proxies, if known (discovered from headers such as X-Forwarded-For).",
          "examples": [
            "192.168.123.132"
          ],
          "is_sensitive": true,
          "pattern": "^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}|(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}$",
          "title": "HTTP Client IP",
          "type": "string"
        },
        "http.useragent": {
          "default": null,
          "description": "\nThe user agent header received with the request.\nOnly when span.kind: server.",
          "examples": [
            "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
          ],
          "is_sensitive": true,
          "minLength": 1,
          "title": "HTTP User Agent",
          "type": "string"
        },
        "http.request.content_length": {
          "default": null,
          "description": "\nThe size of the request body.\nThe size of the request payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the Content-Length header.\nFor requests using transport encoding, this should be compressed size.",
          "examples": [
            1234
          ],
          "exclusiveMinimum": 0,
          "is_sensitive": true,
          "title": "HTTP Request Content Length",
          "type": "integer"
        },
        "http.response.content_length": {
          "default": null,
          "description": "\nThe size of the response payload body in bytes.\nThe size of the response payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the Content-Length header.\nFor requests using transport encoding, this should be compressed size.",
          "examples": [
            1234
          ],
          "exclusiveMinimum": 0,
          "is_sensitive": true,
          "title": "HTTP Response Content Length",
          "type": "integer"
        },
        "http.request.content_length_uncompressed": {
          "default": null,
          "description": "\nThe size of the request payload body after transport decoding. Not set if transport encoding not used.",
          "examples": [
            1234
          ],
          "exclusiveMinimum": 0,
          "is_sensitive": true,
          "title": "HTTP Request Content Length Uncompressed",
          "type": "integer"
        },
        "http.response.content_length_uncompressed": {
          "default": null,
          "description": "\nThe size of the response payload body after transport decoding. Not set if transport encoding not used.",
          "examples": [
            1234
          ],
          "exclusiveMinimum": 0,
          "is_sensitive": true,
          "title": "HTTP Response Content Length Uncompressed",
          "type": "integer"
        }
      },
      "required": [
        "span.kind",
        "http.status_code",
        "http.url",
        "http.method"
      ],
      "title": "TagsHTTP",
      "type": "object"
    },
    "TagsSQL": {
      "properties": {
        "span.kind": {
          "allOf": [
            {
              "$ref": "#/$defs/SpanKind"
            }
          ],
          "description": "",
          "title": "span.kind"
        },
        "db.system": {
          "description": "An identifier for the database management system (DBMS) product being used.",
          "examples": [
            "mysql",
            "postgresql"
          ],
          "is_sensitive": false,
          "pattern": "^(adabas|buntdb|cache|cassandra|cloudscape|cockroachdb|coldfusion|consul|cosmosdb|couchbase|couchdb|db2|derby|dynamodb|edb|elasticsearch|eloquent|filemaker|firebird|firstsql|geode|h2|hanadb|hbase|hive|hsqldb|informix|ingres|instantdb|interbase|leveldb|mariadb|maxdb|memcached|mongodb|mssql|mysql|neo4j|netezza|opensearch|oracle|other_sql|pervasive|pointbase|postgresql|presto|progress|redis|redshift|snowflake|sqlite|sybase|teradata|vertica)$",
          "title": "DB System",
          "type": "string"
        },
        "db.connection_string": {
          "default": null,
          "description": "The connection string used to connect to the database.",
          "examples": [
            "Server=(localdb)\u000b11.0;Integrated Security=true;",
            "postgresql://localhost:5432"
          ],
          "is_sensitive": true,
          "title": "DB Connection String",
          "type": "string"
        },
        "db.user": {
          "default": null,
          "description": "Username for accessing the database.",
          "examples": [
            "widget_user"
          ],
          "is_sensitive": false,
          "title": "DB User",
          "type": "string"
        },
        "db.name": {
          "default": null,
          "description": "The name of the database being connected to.",
          "examples": [
            "customers"
          ],
          "is_sensitive": false,
          "title": "DB Name",
          "type": "string"
        },
        "db.statement": {
          "default": null,
          "description": "The database statement being executed.",
          "examples": [
            "SELECT * FROM wuser_table', 'SET mykey \"WuValue"
          ],
          "is_sensitive": true,
          "title": "DB Statement",
          "type": "string"
        },
        "db.operation": {
          "default": null,
          "description": "The name of the operation being executed, e.g. the MongoDB command name such as findAndModify, or the SQL keyword.",
          "examples": [
            "findAndModify",
            "HMSET",
            "SELECT"
          ],
          "is_sensitive": false,
          "title": "DB Operation",
          "type": "string"
        },
        "db.sql.table": {
          "default": null,
          "description": "The name of the primary table that the operation is acting upon, including the database name (if applicable).",
          "examples": [
            "customers"
          ],
          "is_sensitive": false,
          "title": "DB SQL Table",
          "type": "string"
        },
        "db.row_count": {
          "default": null,
          "description": "\nThe number of rows/results from the query or operation. For caches and other datastores, i.e. Redis, this tag should only set for operations that retrieve stored data,\nsuch as GET operations and queries, excluding SET and other commands not returning data. ",
          "examples": [
            "customers"
          ],
          "is_sensitive": false,
          "minimum": 0,
          "title": "DB Row Count",
          "type": "integer"
        }
      },
      "required": [
        "span.kind",
        "db.system"
      ],
      "title": "TagsSQL",
      "type": "object"
    },
    "SpanKind": {
      "enum": [
        "internal",
        "client",
        "server",
        "producer",
        "consumer"
      ],
      "title": "SpanKind",
      "type": "string"
    }
  },
  "description": "Represents the generic semantic_model for the agent payload, structurally defined here: https://github.com/DataDog/datadog-agent/blob/main/pkg/proto/datadog/trace/agent_payload.proto",
  "properties": {
    "hostName": {
      "default": null,
      "description": "\nHostname of where the agent is running.",
      "examples": [
        "my-hostname"
      ],
      "is_sensitive": false,
      "minLength": 0,
      "title": "Hostname",
      "type": "string"
    },
    "env": {
      "default": null,
      "description": "Specifies the 'env' set in the agent's configuration.",
      "minLength": 1,
      "title": "Env",
      "type": "string"
    },
    "tags": {
      "additionalProperties": {
        "type": "string"
      },
      "default": null,
      "description": "Tags specifies tags common in all `tracerPayloads`",
      "title": "Tags",
      "type": "object"
    },
    "agentVersion": {
      "description": "Specifies version of the agent",
      "minLength": 1,
      "title": "Agent Version",
      "type": "string"
    },
    "targetTPS": {
      "description": "Holds `TargetTPS` value in AgentConfig",
      "exclusiveMinimum": 0.0,
      "title": "Target TPS",
      "type": "number"
    },
    "errorTPS": {
      "description": "Holds `ErrorTPS` value in AgentConfig",
      "exclusiveMinimum": 0.0,
      "title": "Error TPS",
      "type": "number"
    },
    "rareSamplerEnabled": {
      "default": null,
      "description": "Holds `RareSamplerEnabled` value in AgentConfig",
      "title": "Rare Sampler Flag",
      "type": "boolean"
    },
    "tracerPayloads": {
      "description": "Specifies the list of the payloads received from tracers",
      "items": {
        "$ref": "#/$defs/TracerPayload"
      },
      "title": "Tracer Payloads",
      "type": "array"
    }
  },
  "required": [
    "agentVersion",
    "targetTPS",
    "errorTPS",
    "tracerPayloads"
  ],
  "title": "AgentPayload",
  "type": "object",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}